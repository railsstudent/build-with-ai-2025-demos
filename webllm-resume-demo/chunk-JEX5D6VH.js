import{Db as f,Eb as h,Fb as w,K as g,M as d,U as c,Z as l,da as p,e as y,ea as u,j as m,ma as b}from"./chunk-2H5RJ6A3.js";function k(n){n||(l(k),n=c(u));let e=new y(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(g(e))}var v=class{source;destroyed=!1;destroyRef=c(u);constructor(e){this.source=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}subscribe(e){if(this.destroyed)throw new d(953,!1);let t=this.source.pipe(k(this.destroyRef)).subscribe({next:r=>e(r)});return{unsubscribe:()=>t.unsubscribe()}}};function F(n,e){return new v(n)}function D(n,e){!e?.injector&&l(D);let t=e?.injector??c(p),r=new m(1),i=w(()=>{let o;try{o=n()}catch(a){f(()=>r.error(a));return}f(()=>r.next(o))},{injector:t,manualCleanup:!0});return t.get(u).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function x(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&l(x);let r=t?e?.injector?.get(u)??c(u):null,i=j(e?.equal),o;e?.requireSync?o=b({kind:0},{equal:i}):o=b({kind:1,value:e?.initialValue},{equal:i});let a=n.subscribe({next:s=>o.set({kind:1,value:s}),error:s=>{if(e?.rejectErrors)throw s;o.set({kind:2,error:s})}});if(e?.requireSync&&o().kind===0)throw new d(601,!1);return r?.onDestroy(a.unsubscribe.bind(a)),h(()=>{let s=o();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new d(601,!1)}},{equal:e?.equal})}function j(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}export{F as a,D as b,x as c};
